language: go

sudo: false

matrix:
  include:
    - go: "1.10.x"
      before_script:
        - go get .
        - go get github.com/smartystreets/goconvey/convey
      script: go test -v ./...
      env: ISOLATED=true
    - go: "1.11.x"
      before_script: go mod vendor
      script: go mod vendor && go test -v -mod=vendor ./...
      env:
        - ISOLATED=true
        - GO111MODULE=on
    - go: "1.12.x"
      before_script: go mod vendor
      script: go test -v -mod=vendor ./...
      env:
        - ISOLATED=true
        - GO111MODULE=on

gobuild_args: -x -ldflags "-X main.VersionString v1.2.3"

